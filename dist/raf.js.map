{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///webpack/bootstrap 0cd1afd3d6ec17a4f760","webpack:///./src/index.js","webpack:///./src/lib/nativeaf.js","webpack:///./src/lib/now.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,O;ACVA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,uBAAe;AACf;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;;;;;;ACtCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,aAAY,iBAAiB,OAAO;AACpC;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,2BAA0B;AAC1B;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,cAAa,OAAO;AACpB;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA,QAAO;AACP;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA,EAAC;;;AAGD,iC;;;;;;AC9KA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA,MAAK;;AAEL,aAAY,oBAAoB;AAChC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;;;;;;ACzBA;;AAEA;AACA;AACA;AACA,cAAa,mB;AACb;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,cAAa,OAAO;AACpB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,aAAY,OAAO,wBAAwB;AAC3C;AACA,cAAa,OAAO;AACpB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA","file":"raf.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"raf\"] = factory();\n\telse\n\t\troot[\"raf\"] = factory();\n})(this, function() {\nreturn \n\n\n/** WEBPACK FOOTER **\n ** webpack/universalModuleDefinition\n **/"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap 0cd1afd3d6ec17a4f760\n **/","// Thanks To\n// --------------------------------------------\n// https://github.com/chrisdickinson/raf\n// https://github.com/kof/animation-frame\n// \n// TODO:\n// ios6 problem\n// compatible for PC\n// error handle\n'use strict';\n\nvar nativeAF = require('./lib/nativeaf');\nvar now = require('./lib/now');\nvar nativeRAF = nativeAF && nativeAF.raf;\nvar nativeCAF = nativeAF && nativeAF.caf;\n\n// 默认帧速率 60fps\nAnimationFrame.DEFAULT_FRAMERATE = 60;\n\n/**\n * \n * @params {Number || Object}  eg: { frameRate: 30 }\n * @constructor\n */\nfunction AnimationFrame(options) {\n  if (!(this instanceof AnimationFrame)) {\n    return new AnimationFrame(options);\n  }\n\n  // 用户自定义的帧速率\n  if (typeof options == 'number') {\n    options = {\n      frameRate: options\n    };\n  }\n  options || (options = {});\n  options.useNative !== false && (options.useNative = true);\n\n  this.options = options;\n  // 帧速率\n  this.frameRate = options.frameRate || AnimationFrame.DEFAULT_FRAMERATE;\n  // 每帧时长\n  this.frameLength = 1000 / this.frameRate;\n  this._isCustomFrameRate = this.frameRate !== AnimationFrame.FRAME_RATE;\n  this._lastTickTime = 0;\n  this._tickCount = 0;\n  this._currentKeymaps = {};\n  this.keymapsSize = 0;\n  this._delaying = false;\n}\n\nfunction delayCallback(time) {\n\n  var lastTickTime = this._lastTickTime;\n  var delay;\n  time = time || 0;\n\n  // 保证第一次走到这里\n  if (lastTickTime === 0) {\n    this._lastTickTime = lastTickTime = time;\n  }\n  delay = this.frameLength - (time - lastTickTime);\n  if (delay < 0) {\n    delay = 0;\n  }\n  // should be (time + delay), 但实际上会这个值大\n  // 比如10帧，应该是100ms调用，但是可能112ms调用，那么下次delay 88ms就希望调用\n  this._lastTickTime = time + delay;\n\n  // TODO:\n  if (!this.options.useNative) {\n    requestTimeout.call(this, delay);\n    return;\n  }\n\n  if (delay === 0) {\n    doCallback.call(this);\n  } else {\n    if (this.keymapsSize !== 0) {\n      nativeRAF(delayCallback.bind(this));\n    }\n  }\n}\n\n// use timeout\nfunction requestTimeout(delay) {\n  var self = this;\n  setTimeout(function() {\n    doCallback.call(self);\n  }, delay);\n};\n\nfunction doCallback() {\n  var currentKeymaps;\n  var realCallTime;\n  var id;\n  var item;\n\n  this._delaying = false;\n  currentKeymaps = this._currentKeymaps;\n  this._currentKeymaps = {};\n  this.keymapsSize = 0;\n  this._lastTickTime = 0;\n\n  realCallTime = window.performance.now();\n  for (id in currentKeymaps) {\n    item = currentKeymaps[id];\n    if (!item.cancelled) {\n      item.callback(realCallTime);\n    }\n  }\n}\n\n/**\n * 请求动画帧\n * 所谓自定义帧速率一定要比60小\n * 使用递归raf来判断是否到时调用回调,或者一个setTimeout搞定(不支持或不适用native的时候)\n *\n * @param callback\n * @returns {Number} 返回timer id\n */\nAnimationFrame.prototype.requestAnimationFrame = function(callback) {\n  if (!this._isCustomFrameRate) {\n    return nativeRAF(callback);\n  }\n\n  if (typeof callback !== 'function') throw new TypeError('arguments should be a callback function');\n\n  var self = this;\n\n  this._tickCount++;\n  if (!this._delaying) {\n    this._delaying = true;\n    if (this.options.useNative) {\n      nativeRAF(delayCallback.bind(this));\n    } else {\n      setTimeout(function() {\n        delayCallback.call(self);\n      }, 0);\n    }\n  }\n\n  this._currentKeymaps[this._tickCount] = {\n    id: this._tickCount,\n    callback: callback,\n    cancelled: false\n  };\n  ++this.keymapsSize;\n\n  return this._tickCount;\n};\n\n/**\n * 取消动画帧\n *\n *\n * @param id\n * @returns\n */\nAnimationFrame.prototype.cancelAnimationFrame = function(id) {\n  if (!this._isCustomFrameRate) {\n    nativeCAF(id);\n  }\n  delete this._currentKeymaps[id];\n  --this.keymapsSize;\n};\n\n\nvar raf = new AnimationFrame({\n  frameRate: 10,\n  useNative: false\n});\n\n\nmodule.exports = AnimationFrame;\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./src/index.js\n ** module id = 0\n ** module chunks = 0\n **/","'use strict';\n\nvar raf = window.requestAnimationFrame;\nvar caf = window.cancelAnimationFrame;\nvar vendors = ['webkit', 'moz', 'o', 'ms'];\nvar vendor;\nvar i;\n\nif (!raf) {\n\n  //vendorName = _.find(vendors, function(vendor) {\n  //  return typeof window[vendor + 'RequestAnimationFrame'] == 'function';\n  //});\n\n  for(i = 0; i < vendors.length; i++) {\n    vendor = window[vendors[i] + 'RequestAnimationFrame'];\n    if (vendor) {\n      raf = vendor;\n      caf = window[vendors[i] + 'CancelAnimationFrame'];\n      break;\n    }\n  }\n}\n\nmodule.exports.raf = raf;\nmodule.exports.caf = caf;\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./src/lib/nativeaf.js\n ** module id = 1\n ** module chunks = 0\n **/","'use strict';\n\n/**\n * 是否支持window.performance\n *\n * @returns {undefined | Object} \n */\nfunction surpportPerformance() {\n  return window.performance;\n};\n\n/**\n * 返回1970.1.1至调用此函数的毫秒\n *\n * @returns {Number} 返回time in ms\n */\nfunction dateNow() {\n  return Date.now() || new Date().getTime();\n};\n\n/**\n * now默认会使用performance API \n * \n * @params {Object} options 如不用performance{ performance: false }\n *\n * @returns {Number} 返回time in ms\n */\nfunction now(notusePersormance) {\n  if (window.performance && surpportPerformance && !notusePersormance) {\n    // 页面打开到执行到这里的时间，精度较高\n    return window.performance.now() + window.performance.timing.navigationStart;\n  }\n  return dateNow();\n};\n\nmodule.exports = now;\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./src/lib/now.js\n ** module id = 2\n ** module chunks = 0\n **/"],"sourceRoot":""}